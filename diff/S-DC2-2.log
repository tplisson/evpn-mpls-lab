
[edit interfaces ae10]
+    unit 30 {
+        vlan-id 30;
+    }
[edit interfaces irb]
+    unit 30 {
+        virtual-gateway-accept-data;
+        family inet {
+            address 10.30.0.5/24 {
+                preferred;
+                virtual-gateway-address 10.30.0.1;
+            }
+        }
+        family inet6 {
+            address 300::5/64 {
+                preferred;
+                virtual-gateway-address 300::1;
+            }
+            address fe80::30:5/64;
+        }
+        virtual-gateway-v4-mac 04:ff:30:00:00:00;
+        virtual-gateway-v6-mac 06:ff:30:00:00:00;
+    }
[edit routing-instances]
+   vlan30 {
+       description "EVPN instance for VLAN 30";
+       instance-type evpn;
+       vlan-id 30;
+       interface ae10.30;
+       routing-interface irb.30;
+       vrf-target target:64514:300;
+       protocols {
+           evpn {
+               default-gateway no-gateway-community;
+           }
+           igmp-snooping {
+               proxy;
+           }
+           mld-snooping {
+               proxy {
+                   source-address fe80::30:5;
+               }
+           }
+       }
+   }
+   vrf30 {
+       description "VRF instance for IRB in VLAN 30";
+       instance-type vrf;
+       interface irb.30;
+       vrf-target target:64514:30;
+       vrf-table-label;
+   }
