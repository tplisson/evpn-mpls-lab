
## Last commit: 2020-02-09 19:53:15 CET by tplisson
version 18.4R2-S3;
groups {
    rstp-edge {
        protocols {
            rstp {
                interface <*> {
                    mode point-to-point;
                    edge;
                    no-root-port;
                }
            }
        }
    }
    CoS-default-scheduler-map {
        class-of-service {
            interfaces {
                <*> {
                    scheduler-map smap-high-bw;
                }
            }
        }
    }
}
system {
    commit synchronize;
    login {
        class operator-local {
            idle-timeout 15;
            permissions [ network trace view view-configuration ];
        }
        class voo-admin {
            idle-timeout 15;
            permissions all;
        }
        class voo-oper {
            idle-timeout 15;
            permissions [ access admin clear field firewall floppy flow-tap flow-tap-operation idp-profiler-operation interface network pgcp-session-mirroring reset rollback routing secret security shell snmp system trace view view-configuration ];
        }
        user DMA {
            uid 2003;
            class read-only;
            authentication {
                encrypted-password "$1$.UBWfr9p$rpzyDrS87I2t8PP.slueK/";
            }
        }
        user automate {
            uid 2006;
            class voo-admin;
            authentication {
                encrypted-password "$1$bkI.of0P$wfq2wRI8/dWLtDIT1w11t0";
            }
        }
        user junosspace {
            uid 2001;
            class super-user;
            authentication {
                ssh-rsa "ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQC6HnsQpsYpAOrRKiDSiFyWHNH+m7Xqw3Q2B1UlkcFKklaI/q1l6d9cj4aYmIBXmWE/fkENI16w1eVUHLyytewbaPaMbnnt6auUP73XwC4xVvqxsmfDMQFm31RvjSWoMrqYN/TDX/POq71+cqjVnVRYCQLcli4WmshKtg4q55hvHTmx1wtjrdjvgcACi8kGLrtPK1jXriM4ZwbC5d+UbWXaTA1Ai2F/4+32t54bVGlz3WytkCWHlEaVAlDippNLw+DsLcH46Z7aEcEGFLrqR9IxJMG0pYGyyHzcX/TO1iFJ1o/HCHO+VvGcekWiVQYllKO24Sv8/wTJEDpAxsV5Ju1n root@space-005056bd229f";
            }
        }
        inactive: user lotusscript {
            uid 2002;
            class operator-local;
            authentication {
                ssh-rsa "ssh-rsa AAAAB3NzaC1yc2EAAAABIwAAAQEApZacP+ue+uUPcZD6PhyeDtR/YAPft+77YvcsogZKSCmgWywBfG4eF1YLLHJtoefX20TUQLGRglMPFQkodMjt5oi2pw5i463oGZFK/vuqXWq3nNKak0Tx1skbg+HHTL4kG4x8RXO3aNIbRph3grAkBmeBAr2sI1nxyUXU6phYNlnRzMZKbtOotZ6RCuvH0om6Tb0jFNvK6IgEgIULIn2+XSGwTvR8BDr/aFWqjSdoMKHcGTJTA84wTjcJtbCnUffwxH9c6Afq2Y/D9X1P8lEwrCeVzcLve8HC0XLitgJqcPmdYHJP8I8apgKMvam0rFhxVWvl1j3+/XiPv3eBSx5D0Q==";
            }
        }
        user oper {
            uid 2004;
            class operator-local;
            authentication {
                ssh-rsa "ssh-rsa AAAAB3NzaC1yc2EAAAABIwAAAQEA1rEtcVaQp9JV1qibCAHhPrGRA/h8mUUyvrzW00/XlCX1Mru2t2fvoy9hEBvpyYTFv3Dpm59RglBOtvya838wvgT12C9cIksborb/yV6scUoS7qVjwsFKb8qP4yDPsx3ymNza73tLjFyAqc4jZ3kn4SbisgYJNlV/FxApjgpIOD+guAio+GU0jwa1ecHcOl7flfSTosCfgshEvuGRTmiqkp4G4LLBZvzqPe62eS9hL83/82B7s31kBSO0wh6v+ABGjmBUxgN7+0K5xDM+CD6hNmcf56m3RRti8Rn+WTId1iprbuUX1RlOr9TNKIC866RNVAji5RnR9J0/8LbJ6grboQ== oper@SBVCP-SCRIPT";
            }
        }
        user superadmin {
            uid 2000;
            class super-user;
            authentication {
                encrypted-password "$1$RN5rs8D.$0GRC0MyTz7czJhibyx/eX/";
            }
        }
        user template-admin {
            uid 2010;
            class voo-admin;
        }
        user template-oper {
            uid 2011;
            class voo-oper;
        }
        user tplisson {
            uid 2005;
            class super-user;
            authentication {
                encrypted-password "$6$bz9R8zad$31t0ed9fF6D8WcD8beavraTvAZOporf8TKLHW.7egu4ABWEUk.upEFrEHVvTloa4tZc5mXfJ32ebrO0RkJbur.";
            }
        }
    }
    root-authentication {
        encrypted-password "$6$TVl57UA1$9GN1pVKJ0MTfB2Bp6w6OkRKoyJrH7i1lsqR17V995RAieH65GZe7pn3XiIDrK/iUjnEbHr48J3aV59BYplC0r.";
    }
    services {
        ssh {
            root-login allow;
            protocol-version v2;
            max-sessions-per-connection 32;
        }
        extension-service {
            request-response {
                grpc {
                    clear-text {
                        port 50051;
                    }
                    skip-authentication;
                }
            }
            notification {
                allow-clients {
                    address 0.0.0.0/0;
                }
            }
        }
        netconf {
            ssh {
                port 830;
            }
        }
    }
    host-name QFX-LAB4-DZ1;
    time-zone Europe/Brussels;
    authentication-order [ password tacplus ];
    tacplus-server {
        10.11.2.29 {
            secret "$9$3W9S9A0yrv7dsBINbY2aJ.Pfz/t1Icyrv1Rds";
            timeout 1;
            single-connection;
        }
        10.11.2.30 {
            secret "$9$qfT30ORlvL69eWXxdVJGUHPQ/9p0OR/CvL";
            timeout 1;
            single-connection;
        }
    }
    accounting {
        events [ login change-log interactive-commands ];
        destination {
            tacplus;
        }
    }
    scripts {
        commit {
            file igmp-snooping-check.py {
                source "ftp://data:dAtra2@10.11.2.23:/JUNIPER/JUNOS/SCRIPTS/COMMIT/igmp-snooping-check.py";
            }
            file l2-checks.py {
                source "ftp://data:dAtra2@10.11.2.23:/JUNIPER/JUNOS/SCRIPTS/COMMIT/l2-checks.py";
            }
        }
        language python;
        synchronize;
    }
    syslog {
        user * {
            any emergency;
        }
        host 10.11.2.19 {
            any any;
            facility-override local1;
            explicit-priority;
        }
        file messages {
            any any;
            authorization info;
            match "!(usage requires a license)";
        }
        file interactive-commands {
            interactive-commands any;
        }
        file default-log-messages {
            any any;
            match "(FRU Offline)|(FRU Online)|(FRU insertion)|(FRU power)|(FRU removal)|(commit complete)|(copying configuration to juniper.save)|(license add)|(license delete)|(link UP)|(package -X delete)|(package -X update)|(plugged in)|(requested 'commit synchronize' operation)|(requested 'commit' operation)|(unplugged)|Transferred|ifAdminStatus|transfer-file|transitioned|QF_NODE|QF_SERVER_NODE_GROUP|QF_INTERCONNECT|QF_DIRECTOR|QF_NETWORK_NODE_GROUP|(Master Unchanged, Members Changed)|(Master Changed, Members Changed)|(Master Detected, Members Changed)|(vc add)|(vc delete)|(Master detected)|(Master changed)|(Backup detected)|(Backup changed)|(interface vcp-)";
            structured-data;
        }
        file messages_firewall_any {
            firewall any;
            archive no-world-readable;
        }
    }
    archival {
        configuration {
            transfer-on-commit;
            archive-sites {
                "ftp://data:dAtra2@10.11.2.23/ARCHIVE/LAB/DMZ";
            }
        }
    }
    ddos-protection {
        traceoptions {
            file ddos-log size 10m;
            flag all;
        }
    }
    ntp {
        boot-server 10.11.2.14;
        server 10.11.2.14;
        server 10.11.2.21;
    }
}
chassis {
    aggregated-devices {
        ethernet {
            device-count 64;
        }
    }
    network-services enhanced-mode;
}
services {
    analytics {
        streaming-server my-server {
            remote-address 10.239.0.40;
            remote-port 50000;
        }
        export-profile my-export-profile {
            local-address 10.239.255.8;
            local-port 54321;
            reporting-rate 1;
            format gpb;
            transport udp;
        }
        sensor qmon-sw {
            server-name my-server;
            export-name my-export-profile;
            resource /junos/system/linecard/qmon-sw/;
            resource-filter .*;
        }
    }
}
security {
    authentication-key-chains {
        key-chain ISIS {
            key 1 {
                secret "$9$mfQ39AuO1EVwikqfF36/CpuB1Rh";
                start-time "2018-12-28.10:00:00 +0100";
                options isis-enhanced;
            }
        }
    }
}
interfaces {
    interface-range l2-access {
        member ge-0/0/23;
        member ge-0/0/1;
        member ge-0/0/25;
    }
    xe-0/0/0 {
        description MX-LAB4-AG1_xe-8/0/0:1;
        gigether-options {
            802.3ad ae2;
        }
    }
    ge-0/0/1 {
        description Fudgi2_p0;
        unit 0 {
            family ethernet-switching {
                interface-mode trunk;
                vlan {
                    members 3-4094;
                }
                storm-control default;
            }
        }
    }
    xe-0/0/7 {
        description Reserved-OV-DWE_DMZ;
    }
    xe-0/0/12 {
        description Test_SFP-H10GB-ACU7M;
        mtu 9192;
        unit 0 {
            family inet {
                address 2.2.2.1/30;
            }
        }
    }
    ge-0/0/23 {
        description CM_TC7210;
        unit 0 {
            family ethernet-switching {
                interface-mode access;
            }
        }
    }
    ge-0/0/25 {
        description Fudgi2_p5;
        unit 0 {
            family ethernet-switching {
                interface-mode trunk;
                vlan {
                    members 3-4094;
                }
                storm-control default;
            }
        }
    }
    xe-0/0/34 {
        description ESX-LAB4-01_vmnic3;
        gigether-options {
            802.3ad ae10;
        }
    }
    xe-0/0/35 {
        description ESX-LAB4-01_vmnic4;
        gigether-options {
            802.3ad ae10;
        }
    }
    xe-0/0/40 {
        description L-DC1-1A_xe-0/0/0:0;
        gigether-options {
            802.3ad ae40;
        }
    }
    xe-0/0/43 {
        apply-macro no-stp;
        description Ixia_E40_P39;
        unit 0 {
            family ethernet-switching {
                interface-mode access;
                vlan {
                    members Test-CoS;
                }
                storm-control default;
            }
        }
    }
    xe-0/0/45 {
        description Ixia-Port-2/1;
        vlan-tagging;
        unit 10 {
            vlan-id 10;
            family inet {
                address 10.10.11.1/24;
            }
            family inet6 {
                address 111::1/64;
            }
        }
    }
    xe-0/0/46 {
        description QFX-LAB4-DZ2_xe-0/0/46;
        gigether-options {
            802.3ad ae0;
        }
    }
    xe-1/0/40 {
        description L-DC1-1B_xe-0/0/0:0;
        gigether-options {
            802.3ad ae40;
        }
    }
    xe-1/0/45 {
        description Ixia-Port-2/3;
        vlan-tagging;
        mtu 9000;
        unit 10 {
            vlan-id 10;
            family inet {
                address 10.10.10.1/24;
            }
            family inet6 {
                address 110::1/64;
            }
        }
        unit 20 {
            vlan-id 20;
            family inet {
                address 10.20.10.1/24;
            }
            family inet6 {
                address 120::1/64;
            }
        }
        unit 30 {
            vlan-id 30;
            family inet {
                address 10.30.1.1/24;
            }
            family inet6 {
                address 301::1/64;
            }
        }
    }
    xe-1/0/47 {
        gigether-options {
            802.3ad ae0;
        }
    }
    ae0 {
        apply-macro no-stp;
        description QFX-LAB4-DZ2;
        flexible-vlan-tagging;
        mtu 9192;
        encapsulation flexible-ethernet-services;
        aggregated-ether-options {
            lacp {
                active;
                periodic fast;
            }
        }
        unit 0 {
            family ethernet-switching {
                interface-mode trunk;
                vlan {
                    members [ 3-2999 4000-4094 ];
                }
                storm-control default;
            }
        }
        unit 1 {
            vlan-id 1;
            family inet {
                address 10.239.15.0/31;
            }
            family iso;
            family inet6;
            family mpls;
        }
    }
    ae1 {
        mtu 9192;
        aggregated-ether-options {
            lacp {
                active;
                periodic fast;
            }
        }
        unit 0 {
            family inet {
                mtu 8192;
                filter {
                    input cbr8-lab4-ac1_inet;
                }
                address 10.239.15.4/31;
            }
            family iso;
            family inet6;
            family mpls {
                maximum-labels 5;
            }
        }
    }
    ae2 {
        description MX-LAB4-AG1_ae3;
        flexible-vlan-tagging;
        mtu 9192;
        encapsulation flexible-ethernet-services;
        aggregated-ether-options {
            lacp {
                active;
                periodic fast;
            }
        }
        unit 0 {
            family ethernet-switching {
                interface-mode trunk;
                vlan {
                    members [ 3-999 1001-1999 2001-4094 ];
                }
                storm-control default;
            }
        }
        unit 1000 {
            vlan-id 1000;
            family inet {
                address 10.239.15.51/29;
            }
        }
    }
    ae10 {
        apply-macro no-stp;
        description ESX-LAB4-01_Lag;
        mtu 9000;
        aggregated-ether-options {
            lacp {
                active;
            }
        }
        unit 0 {
            family ethernet-switching {
                interface-mode trunk;
                vlan {
                    members all;
                }
                storm-control default;
            }
        }
    }
    ae40 {
        description L-DC1-1A/B;
        vlan-tagging;
        mtu 9000;
        aggregated-ether-options {
            lacp {
                active;
                periodic fast;
            }
        }
        unit 10 {
            vlan-id 10;
            family inet {
                address 10.10.1.111/24;
            }
            family inet6 {
                address 101::111/64;
            }
        }
        unit 20 {
            vlan-id 20;
            family inet {
                address 10.20.1.111/24;
            }
            family inet6 {
                address 201::111/64;
            }
        }
        unit 30 {
            vlan-id 30;
            family inet {
                address 10.30.0.111/24;
            }
            family inet6 {
                address 300::111/64;
                address fe80::30:111/64;
            }
        }
    }
    irb {
        unit 100 {
            family inet {
                address 10.239.0.2/27 {
                    preferred;
                    vrrp-group 1 {
                        virtual-address 10.239.0.1;
                        priority 150;
                        accept-data;
                    }
                }
                address 10.239.0.67/27 {
                    preferred;
                    vrrp-group 2 {
                        virtual-address 10.239.0.65;
                        priority 150;
                        accept-data;
                    }
                }
            }
        }
        inactive: unit 101 {
            family inet {
                address 85.201.61.26/29 {
                    preferred;
                    vrrp-group 1 {
                        virtual-address 85.201.61.25;
                        priority 150;
                        accept-data;
                    }
                }
            }
            family inet6 {
                address 2a02:2788:fffe:2::2/64 {
                    preferred;
                    vrrp-inet6-group 1 {
                        virtual-inet6-address 2a02:2788:fffe:2::1;
                        virtual-link-local-address fe80::2788:fffe:2:1;
                        priority 150;
                        accept-data;
                    }
                }
                address fe80::2788:fffe:2:2/64 {
                    preferred;
                }
            }
        }
        unit 102 {
            family inet {
                address 10.238.0.34/27 {
                    preferred;
                    vrrp-group 1 {
                        virtual-address 10.238.0.33;
                        priority 150;
                        accept-data;
                    }
                }
            }
        }
        unit 103 {
            family inet {
                address 10.239.0.34/27 {
                    preferred;
                    vrrp-group 1 {
                        virtual-address 10.239.0.33;
                        priority 150;
                        accept-data;
                    }
                }
            }
        }
        unit 1000 {
            family inet {
                address 10.239.15.11/29;
            }
        }
        unit 4084 {
            description Transit-dmz-mgmt-vm;
            family inet {
                address 10.239.15.42/29;
            }
        }
        unit 4085 {
            description Transit-dmz-mgmt-esxi;
            family inet {
                address 10.239.15.34/29;
            }
        }
        unit 4086 {
            description Transit-dmz-voice-prov;
            family inet {
                address 10.239.15.26/29;
            }
        }
        inactive: unit 4087 {
            description Transit-dmz-cnr-cpe;
            family inet {
                address 10.239.15.18/29;
            }
            family inet6 {
                address 2a02:2788:fffe:3::2/112;
                address fe80::2788:fffe:3:2/64;
            }
        }
    }
    lo0 {
        unit 0 {
            family inet {
                address 10.239.255.8/32;
            }
            family iso {
                address 49.0000.0102.3925.5008.00;
            }
        }
    }
    vme {
        unit 0 {
            family inet {
                address 192.168.200.29/24;
            }
        }
    }
}
snmp {
    community CADMIUM {
        authorization read-only;
    }
    trap-group space {
        targets {
            10.11.2.60;
        }
    }
}
forwarding-options {
    storm-control-profiles default {
        all;
    }
    storm-control-profiles multicast {
        all {
            no-multicast;
        }
    }
}
policy-options {
    prefix-list DMZ_subnets {
        10.238.0.0/16;
        10.239.0.0/16;
    }
    prefix-list rfc1918 {
        10.0.0.0/8;
        172.16.0.0/12;
        192.168.0.0/16;
    }
    prefix-list IXIAv4 {
        10.10.11.0/24;
        10.10.22.0/24;
    }
    prefix-list IXIAv6 {
        111::/64;
        122::/64;
    }
    policy-statement DIRECT {
        from protocol direct;
        then accept;
    }
    policy-statement EVPN_VRF_IMPORT {
        term switch_options_comm {
            from community switch_options_comm;
            then accept;
        }
    }
    policy-statement IXIAv4 {
        term ixia {
            from {
                prefix-list IXIAv4;
            }
            then accept;
        }
    }
    policy-statement IXIAv6 {
        term ixia {
            from {
                prefix-list IXIAv6;
            }
            then accept;
        }
    }
    policy-statement Only-Default-Route {
        term default-route {
            from {
                route-filter 0.0.0.0/0 exact;
            }
            then accept;
        }
        term reject-all-other-routes {
            then reject;
        }
    }
    policy-statement Only-Default-RouteIPV6 {
        term default-route {
            from {
                route-filter ::/0 exact;
            }
            then accept;
        }
        term reject-all-other-routes {
            then reject;
        }
    }
    policy-statement PL-AGGREGATE {
        term AGGREGATE {
            from protocol aggregate;
            then accept;
        }
    }
    policy-statement PL-DIRECT {
        term DIRECT {
            from protocol direct;
            then accept;
        }
    }
    policy-statement PL-LOAD-BALANCE {
        term LB {
            then {
                load-balance per-packet;
            }
        }
    }
    policy-statement PL-STATIC {
        term STATIC {
            from protocol static;
            then accept;
        }
    }
    policy-statement PO-dmz-to-qfx-prod {
        term EVPN {
            from protocol evpn;
            then reject;
        }
        from {
            prefix-list-filter DMZ_subnets orlonger;
        }
        then accept;
    }
    policy-statement PO-dmz-to-srx {
        term no-transit {
            from {
                route-filter 10.11.255.0/24 orlonger;
                route-filter 10.11.254.0/24 orlonger;
            }
            then reject;
        }
        term dmz-aggregate {
            from protocol aggregate;
            then accept;
        }
        term dmz {
            from protocol direct;
            then accept;
        }
        term dmz-lb {
            from protocol static;
            then accept;
        }
        term reject-all-other {
            then reject;
        }
    }
    policy-statement PO-dmz-to-srx-ipv6 {
        term no-transit {
            from {
                route-filter 2a02:2788:fffe:3::/64 orlonger;
            }
            then reject;
        }
        term dmz-aggregate {
            from protocol aggregate;
            then accept;
        }
        term dmz {
            from protocol direct;
            then accept;
        }
        term dmz-lb {
            from protocol static;
            then accept;
        }
        term reject-all-other {
            then reject;
        }
    }
    policy-statement QFX1 {
        term DIRECT {
            from protocol direct;
            then {
                community add QFX1;
                accept;
            }
        }
        term AGGREGATE {
            from protocol aggregate;
            then {
                community add QFX1;
                accept;
            }
        }
    }
    policy-statement STATIC {
        term static {
            from protocol static;
            then accept;
        }
    }
    policy-statement load-balancing-policy {
        then {
            load-balance per-packet;
        }
    }
    policy-statement nh-vga-v4 {
        then {
            next-hop 100.1.1.11;
            accept;
        }
    }
    policy-statement rfc1918 {
        term 1 {
            from {
                prefix-list-filter rfc1918 exact;
            }
            then accept;
        }
        term 2 {
            then reject;
        }
    }
    policy-statement set-local-pref-150 {
        term set-lp {
            then {
                local-preference 150;
                next policy;
            }
        }
    }
    policy-statement set-local-pref-200 {
        term set-lp {
            then {
                local-preference 200;
                next policy;
            }
        }
    }
    policy-statement set-next-hop-self {
        term nhs {
            then {
                next-hop self;
                next policy;
            }
        }
    }
    policy-statement static {
        from protocol static;
        then accept;
    }
    community QFX1 members 64514:101;
    community switch_options_comm members target:65514:1000;
}
class-of-service {
    classifiers {
        dscp voo-dscp {
            forwarding-class best-effort {
                loss-priority low code-points [ 000000 000001 000010 000011 000100 000101 000110 000111 ];
                loss-priority high code-points [ 001000 001001 001010 001011 001100 001101 001110 001111 ];
            }
            forwarding-class business-critical {
                loss-priority low code-points [ 010000 010001 010010 010011 010100 010101 010110 010111 ];
            }
            forwarding-class assured-forwarding {
                loss-priority low code-points [ 011000 011001 011010 011011 011100 011101 011110 011111 ];
                loss-priority high code-points [ 100000 100001 100010 100011 100100 100101 100110 100111 ];
            }
            forwarding-class expedited-forwarding {
                loss-priority low code-points [ 101000 101001 101010 101011 101100 101101 101110 101111 ];
            }
            forwarding-class network-control {
                loss-priority low code-points [ 110000 110001 110010 110011 110100 110101 110110 110111 ];
                loss-priority high code-points [ 111000 111001 111010 111011 111100 111101 111110 111111 ];
            }
        }
        dscp-ipv6 voo-dscp-ipv6 {
            forwarding-class best-effort {
                loss-priority low code-points [ 000000 000001 000010 000011 000100 000101 000110 000111 ];
                loss-priority high code-points [ 001000 001001 001010 001011 001100 001101 001110 001111 ];
            }
            forwarding-class business-critical {
                loss-priority low code-points [ 010000 010001 010010 010011 010100 010101 010110 010111 ];
            }
            forwarding-class assured-forwarding {
                loss-priority low code-points [ 011000 011001 011010 011011 011100 011101 011110 011111 ];
                loss-priority high code-points [ 100000 100001 100010 100011 100100 100101 100110 100111 ];
            }
            forwarding-class expedited-forwarding {
                loss-priority low code-points [ 101000 101001 101010 101011 101100 101101 101110 101111 ];
            }
            forwarding-class network-control {
                loss-priority low code-points [ 110000 110001 110010 110011 110100 110101 110110 110111 ];
                loss-priority high code-points [ 111000 111001 111010 111011 111100 111101 111110 111111 ];
            }
        }
        exp voo-exp {
            forwarding-class best-effort {
                loss-priority low code-points 000;
                loss-priority high code-points 001;
            }
            forwarding-class business-critical {
                loss-priority low code-points 010;
            }
            forwarding-class assured-forwarding {
                loss-priority low code-points 011;
                loss-priority high code-points 100;
            }
            forwarding-class expedited-forwarding {
                loss-priority low code-points 101;
            }
            forwarding-class network-control {
                loss-priority low code-points 110;
                loss-priority high code-points 111;
            }
        }
        ieee-802.1 voo-802.1p {
            forwarding-class best-effort {
                loss-priority low code-points 000;
                loss-priority high code-points 001;
            }
            forwarding-class business-critical {
                loss-priority low code-points 010;
            }
            forwarding-class assured-forwarding {
                loss-priority low code-points 011;
                loss-priority high code-points 100;
            }
            forwarding-class expedited-forwarding {
                loss-priority low code-points 101;
            }
            forwarding-class network-control {
                loss-priority low code-points 110;
                loss-priority high code-points 111;
            }
        }
    }
    drop-profiles {
        dp-be-high {
            interpolate {
                fill-level [ 75 100 ];
                drop-probability [ 0 100 ];
            }
        }
    }
    forwarding-classes {
        class best-effort queue-num 0;
        class business-critical queue-num 4;
        class assured-forwarding queue-num 2;
        class expedited-forwarding queue-num 3 no-loss;
        class network-control queue-num 7;
    }
    interfaces {
        apply-groups CoS-default-scheduler-map;
        et-* {
            apply-groups CoS-default-scheduler-map;
            unit * {
                classifiers {
                    dscp voo-dscp;
                    dscp-ipv6 voo-dscp-ipv6;
                    exp voo-exp;
                    ieee-802.1 voo-802.1p;
                }
            }
        }
        ge-* {
            apply-groups CoS-default-scheduler-map;
            unit * {
                classifiers {
                    dscp voo-dscp;
                    dscp-ipv6 voo-dscp-ipv6;
                    exp voo-exp;
                    ieee-802.1 voo-802.1p;
                }
            }
        }
        xe-* {
            apply-groups CoS-default-scheduler-map;
            unit * {
                classifiers {
                    dscp voo-dscp;
                    dscp-ipv6 voo-dscp-ipv6;
                    exp voo-exp;
                    ieee-802.1 voo-802.1p;
                }
            }
        }
        ae* {
            apply-groups CoS-default-scheduler-map;
            unit * {
                classifiers {
                    dscp voo-dscp;
                    dscp-ipv6 voo-dscp-ipv6;
                    exp voo-exp;
                    ieee-802.1 voo-802.1p;
                }
            }
        }
    }
    scheduler-maps {
        smap-high-bw {
            forwarding-class best-effort scheduler sched-high-bw-be;
            forwarding-class assured-forwarding scheduler sched-high-bw-af;
            forwarding-class business-critical scheduler sched-high-bw-bc;
            forwarding-class expedited-forwarding scheduler sched-high-bw-ef;
            forwarding-class network-control scheduler sched-high-bw-nc;
            forwarding-class mcast scheduler sched-high-bw-mcast;
        }
    }
    schedulers {
        sched-high-bw-be {
            transmit-rate percent 45;
            buffer-size percent 60;
            priority low;
            drop-profile-map loss-priority high protocol any drop-profile dp-be-high;
        }
        sched-high-bw-bc {
            transmit-rate percent 25;
            buffer-size percent 15;
            priority low;
        }
        sched-high-bw-af {
            transmit-rate percent 15;
            buffer-size percent 10;
            priority low;
        }
        sched-high-bw-ef {
            shaping-rate percent 5;
            buffer-size percent 5;
            priority strict-high;
        }
        sched-high-bw-nc {
            shaping-rate percent 5;
            buffer-size percent 9;
            priority strict-high;
        }
        sched-high-bw-mcast {
            transmit-rate percent 5;
            buffer-size percent 1;
            priority low;
        }
    }
}
firewall {
    family inet {
        filter cbr8-lab4-ac1_inet {
            interface-specific;
            term from_bu1.1 {
                from {
                    source-address {
                        10.238.1.1/32;
                    }
                }
                then {
                    count from_bu1.1;
                    accept;
                }
            }
            term from_bu1.5 {
                from {
                    source-address {
                        10.238.2.1/32;
                    }
                }
                then {
                    count from_bu1.5;
                    accept;
                }
            }
            term to_bu1.1 {
                from {
                    destination-address {
                        10.238.1.1/32;
                    }
                }
                then {
                    count to_bu1.1;
                    accept;
                }
            }
            term to_bu1.5 {
                from {
                    destination-address {
                        10.238.2.1/32;
                    }
                }
                then {
                    count to_bu1.5;
                    accept;
                }
            }
            term all {
                then accept;
            }
        }
    }
    family ethernet-switching {
        filter ospf-troubleshooting {
            term from_vrr {
                from {
                    ip-source-address {
                        10.239.252.99/32;
                    }
                    ip-destination-address {
                        224.0.0.5/32;
                    }
                }
                then {
                    accept;
                    count from_vrr;
                }
            }
            term accept {
                then accept;
            }
        }
        filter cbr8-lab4-ac1 {
            interface-specific;
            term from_bu1.1_vlan4086 {
                from {
                    ip-source-address {
                        10.238.1.1/32;
                    }
                    user-vlan-id 4086;
                }
                then {
                    accept;
                    count from_bu1.1_vlan4086;
                }
            }
            term from_bu1.5_vlan4086 {
                from {
                    ip-source-address {
                        10.238.2.1/32;
                    }
                    user-vlan-id 4086;
                }
                then {
                    accept;
                    count from_bu1.5_vlan4086;
                }
            }
            term to_bu1.1_vlan4086 {
                from {
                    ip-destination-address {
                        10.238.1.1/32;
                    }
                    user-vlan-id 4086;
                }
                then {
                    accept;
                    count to_bu1.1_vlan4086;
                }
            }
            term to_bu1.5_vlan4086 {
                from {
                    ip-destination-address {
                        10.238.2.1/32;
                    }
                    user-vlan-id 4086;
                }
                then {
                    accept;
                    count to_bu1.5_vlan4086;
                }
            }
            term from_bu1.1_vlan102 {
                from {
                    ip-source-address {
                        10.238.1.1/32;
                    }
                    user-vlan-id 102;
                }
                then {
                    accept;
                    count from_bu1.1_vlan102;
                }
            }
            term from_bu1.5_vlan102 {
                from {
                    ip-source-address {
                        10.238.2.1/32;
                    }
                    user-vlan-id 102;
                }
                then {
                    accept;
                    count from_bu1.5_vlan102;
                }
            }
            term to_bu1.1_vlan102 {
                from {
                    ip-destination-address {
                        10.238.1.1/32;
                    }
                    user-vlan-id 102;
                }
                then {
                    accept;
                    count to_bu1.1_vlan102;
                }
            }
            term to_bu1.5_vlan102 {
                from {
                    ip-destination-address {
                        10.238.2.1/32;
                    }
                    user-vlan-id 102;
                }
                then {
                    accept;
                    count to_bu1.5_vlan102;
                }
            }
            term from_bu1.1_vlan101 {
                from {
                    ip-source-address {
                        10.238.1.1/32;
                    }
                    user-vlan-id 101;
                }
                then {
                    accept;
                    count from_bu1.1_vlan101;
                }
            }
            term from_bu1.5_vlan101 {
                from {
                    ip-source-address {
                        10.238.2.1/32;
                    }
                    user-vlan-id 101;
                }
                then {
                    accept;
                    count from_bu1.5_vlan101;
                }
            }
            term to_bu1.1_vlan101 {
                from {
                    ip-destination-address {
                        10.238.1.1/32;
                    }
                    user-vlan-id 101;
                }
                then {
                    accept;
                    count to_bu1.1_vlan101;
                }
            }
            term to_bu1.5_vlan101 {
                from {
                    ip-destination-address {
                        10.238.2.1/32;
                    }
                    user-vlan-id 101;
                }
                then {
                    accept;
                    count to_bu1.5_vlan101;
                }
            }
            term all {
                then accept;
            }
        }
    }
}
routing-instances {
    PROD-LAB {
        instance-type vrf;
        interface ae2.1000;
        interface irb.1000;
        vrf-target target:65514:1000;
        vrf-table-label;
        routing-options {
            autonomous-system 65514;
        }
        protocols {
            bgp {
                group DMZ_PROD-LAB {
                    type external;
                    family inet {
                        unicast;
                    }
                    family inet6 {
                        unicast;
                    }
                    export PO-dmz-to-qfx-prod;
                    peer-as 64514;
                    neighbor 10.239.15.50 {
                        description QFX-ANS-DMZ-1;
                    }
                }
                group SRX {
                    type external;
                    family inet {
                        unicast;
                    }
                    family inet6 {
                        unicast;
                    }
                    export rfc1918;
                    peer-as 65513;
                    neighbor 10.239.15.10 {
                        description SRX-LAB4-1;
                    }
                }
            }
        }
    }
    inactive: dmz-cnr-cpe {
        instance-type vrf;
        interface irb.101;
        interface irb.4087;
        vrf-target target:65514:4087;
        vrf-table-label;
        routing-options {
            autonomous-system 65514;
        }
        protocols {
            bgp {
                group srx {
                    type external;
                    authentication-key "$9$u24lOEy8X-Vb28XmTQ3puO1IhlK8Lx";
                    export PO-dmz-to-srx;
                    peer-as 65513;
                    neighbor 10.239.15.17 {
                        import Only-Default-Route;
                        bfd-liveness-detection {
                            minimum-interval 1000;
                            minimum-receive-interval 1000;
                            multiplier 5;
                        }
                    }
                }
                group srx-ipv6 {
                    type external;
                    authentication-key "$9$u24lOEy8X-Vb28XmTQ3puO1IhlK8Lx";
                    export PO-dmz-to-srx-ipv6;
                    peer-as 65513;
                    neighbor 2a02:2788:fffe:3::1 {
                        import Only-Default-RouteIPV6;
                        bfd-liveness-detection {
                            minimum-interval 1000;
                            minimum-receive-interval 1000;
                            multiplier 5;
                        }
                    }
                }
            }
        }
    }
    dmz-mgmt-esxi {
        instance-type vrf;
        interface irb.100;
        interface irb.4085;
        vrf-target target:65514:4085;
        vrf-table-label;
        routing-options {
            autonomous-system 65514;
        }
        protocols {
            bgp {
                graceful-restart;
                group srx {
                    type external;
                    authentication-key "$9$u24lOEy8X-Vb28XmTQ3puO1IhlK8Lx";
                    export PO-dmz-to-srx;
                    peer-as 65513;
                    neighbor 10.239.15.33 {
                        bfd-liveness-detection {
                            minimum-interval 1000;
                            minimum-receive-interval 1000;
                            multiplier 5;
                        }
                    }
                }
            }
        }
    }
    dmz-mgmt-vm {
        instance-type vrf;
        interface irb.103;
        interface irb.4084;
        vrf-target target:65514:4084;
        vrf-table-label;
        routing-options {
            autonomous-system 65514;
        }
        protocols {
            bgp {
                graceful-restart;
                group srx {
                    type external;
                    authentication-key "$9$u24lOEy8X-Vb28XmTQ3puO1IhlK8Lx";
                    export PO-dmz-to-srx;
                    peer-as 65513;
                    neighbor 10.239.15.41 {
                        bfd-liveness-detection {
                            minimum-interval 1000;
                            minimum-receive-interval 1000;
                            multiplier 5;
                        }
                    }
                }
            }
        }
    }
    dmz-voice-prov {
        instance-type vrf;
        interface irb.102;
        interface irb.4086;
        vrf-target target:65514:4086;
        vrf-table-label;
        routing-options {
            autonomous-system 65514;
        }
        protocols {
            bgp {
                graceful-restart;
                group srx {
                    type external;
                    authentication-key "$9$u24lOEy8X-Vb28XmTQ3puO1IhlK8Lx";
                    export PO-dmz-to-srx;
                    peer-as 65513;
                    neighbor 10.239.15.25 {
                        import Only-Default-Route;
                        bfd-liveness-detection {
                            minimum-interval 1000;
                            minimum-receive-interval 1000;
                            multiplier 5;
                        }
                    }
                }
            }
        }
    }
    vr10 {
        instance-type virtual-router;
        interface xe-1/0/45.10;
        interface ae40.10;
        routing-options {
            autonomous-system 65111;
        }
        protocols {
            bgp {
                export PL-DIRECT;
                group 10-v4 {
                    peer-as 64514;
                    neighbor 10.10.1.11;
                    neighbor 10.10.1.12;
                }
                group 10-v6 {
                    peer-as 64514;
                    neighbor 101::11;
                    neighbor 101::12;
                }
            }
        }
    }
    vr20 {
        instance-type virtual-router;
        interface xe-1/0/45.20;
        interface ae40.20;
        routing-options {
            rib vr20.inet6.0 {
                static {
                    route ::/0 next-hop 201::1;
                }
            }
            static {
                route 0.0.0.0/0 next-hop 10.20.1.1;
            }
            autonomous-system 65111;
        }
    }
    vr30 {
        instance-type virtual-router;
        interface xe-1/0/45.30;
        interface ae40.30;
        routing-options {
            rib vr30.inet6.0 {
                static {
                    route ::/0 next-hop 300::1;
                }
            }
            static {
                route 0.0.0.0/0 next-hop 10.30.0.1;
            }
        }
        protocols {
            ospf {
                area 0.0.0.0 {
                    interface all;
                }
            }
            ospf3 {
                area 0.0.0.0 {
                    interface all;
                }
            }
        }
    }
}
routing-options {
    static {
        route 10.11.2.0/24 {
            next-hop 192.168.200.1;
            no-readvertise;
        }
        route 10.239.0.40/32 next-table dmz-mgmt-vm.inet.0;
    }
    router-id 10.239.255.8;
    route-distinguisher-id 10.239.255.8;
    autonomous-system 65514;
    forwarding-table {
        export [ load-balancing-policy PL-LOAD-BALANCE ];
        chained-composite-next-hop {
            ingress {
                evpn;
            }
        }
    }
}
#
# $Id:$
#
# Copyright (c) 2014, Juniper Networks, Inc.
# All rights reserved.
#
# Filename: default-flex.conf
# Platform: MERUS
# Description: Factory default config for Junos-flex.
#
#
protocols {
    bgp {
        group ibgp {
            type internal;
            local-address 10.239.255.8;
            family inet-vpn {
                unicast;
            }
            family inet6-vpn {
                unicast;
            }
            family evpn {
                signaling;
            }
            export set-next-hop-self;
            vpn-apply-export;
            multipath;
            neighbor 10.239.255.9;
        }
    }
    isis {
        no-adjacency-holddown;
        backup-spf-options {
            use-post-convergence-lfa;
            use-source-packet-routing;
        }
        source-packet-routing {
            srgb start-label 800000 index-range 4094;
            node-segment {
                ipv4-index 401;
                ipv6-index 601;
            }
        }
        level 2 {
            authentication-key-chain ISIS;
            wide-metrics-only;
            source-packet-routing;
        }
        level 1 disable;
        interface ae0.1 {
            hello-padding adaptive;
            point-to-point;
            family inet {
                bfd-liveness-detection {
                    minimum-interval 300;
                    minimum-receive-interval 300;
                    multiplier 3;
                }
            }
        }
        interface ae1.0 {
            hello-padding adaptive;
            point-to-point;
            family inet {
                bfd-liveness-detection {
                    minimum-interval 300;
                    minimum-receive-interval 300;
                    multiplier 3;
                }
            }
        }
        interface lo0.0 {
            passive;
        }
    }
    igmp {
        interface ae40.101 {
            static {
                group 233.0.0.111 {
                    source 101.0.0.10;
                }
                group 225.0.101.111;
            }
        }
        interface ae40.102 {
            static {
                group 225.0.102.111;
            }
        }
        interface ae40.105 {
            static {
                group 225.105.2.111;
            }
        }
        interface ae40.30 {
            static {
                group 225.30.30.30;
            }
        }
    }
    mpls {
        explicit-null;
        ipv6-tunneling;
        interface ae1.0;
        interface ae0.1;
    }
    lldp {
        port-id-subtype interface-name;
        interface all;
    }
    lldp-med {
        interface all;
    }
    igmp-snooping {
        vlan MGMT_ESX;
        vlan P2P-VM-DHCP;
        vlan PublicIP_VM_JumpHost;
        vlan BB-VRR;
        vlan Clean;
        vlan DMZ_PROD-LAB;
        vlan Dirty;
        vlan IXIA-P13-TO-BRUONE;
        vlan TEST_SKYLANE;
        vlan TRANSIT-dmz-cnr-cpe;
        vlan TRANSIT-dmz-mgmt-esxi;
        vlan TRANSIT-dmz-mgmt-vm;
        vlan TRANSIT-dmz-voice-prov;
        vlan UNTRUST-INTERNET;
        vlan UNTRUST-VRF-VOICE;
        vlan dmz-cnr-cpe;
        vlan dmz-mgmt-esxi;
        vlan dmz-mgmt-vm;
        vlan dmz-voice-prov;
        vlan dhcpv6;
        vlan UNTRUST-PON-PROV;
        vlan Test-CoS;
        vlan MCAST-EVPN;
        vlan UNTRUST-SELFPROVISIONING;
    }
    rstp {
        interface ae2 {
            mode point-to-point;
            edge;
            no-root-port;
        }
        interface l2-access {
            apply-groups rstp-edge;
        }
        bpdu-block-on-edge;
    }
}
vlans {
    BB-VRR {
        vlan-id 500;
    }
    Clean {
        vlan-id 667;
    }
    DMZ_PROD-LAB {
        vlan-id 1000;
        l3-interface irb.1000;
    }
    Dirty {
        vlan-id 666;
    }
    IXIA-P13-TO-BRUONE {
        vlan-id 2000;
    }
    MCAST-EVPN {
        vlan-id 1234;
    }
    TEST_SKYLANE {
        vlan-id 10;
    }
    TRANSIT-dmz-cnr-cpe {
        vlan-id 4087;
        inactive: l3-interface irb.4087;
    }
    TRANSIT-dmz-mgmt-esxi {
        vlan-id 4085;
        l3-interface irb.4085;
    }
    TRANSIT-dmz-mgmt-vm {
        vlan-id 4084;
        l3-interface irb.4084;
    }
    TRANSIT-dmz-voice-prov {
        vlan-id 4086;
        l3-interface irb.4086;
    }
    Test-CoS {
        vlan-id 777;
    }
    UNTRUST-INTERNET {
        vlan-id 4094;
    }
    UNTRUST-PON-PROV {
        vlan-id 4092;
    }
    UNTRUST-SELFPROVISIONING {
        vlan-id 4064;
    }
    UNTRUST-VRF-VOICE {
        vlan-id 4093;
    }
    dhcpv6 {
        vlan-id 547;
    }
    dmz-cnr-cpe {
        vlan-id 101;
        inactive: l3-interface irb.101;
    }
    dmz-mgmt-esxi {
        vlan-id 100;
        l3-interface irb.100;
    }
    dmz-mgmt-vm {
        vlan-id 103;
        l3-interface irb.103;
    }
    dmz-voice-prov {
        vlan-id 102;
        l3-interface irb.102;
    }
    ovroonen {
        apply-macro no-igmp-snooping;
        vlan-id 333;
    }
}
